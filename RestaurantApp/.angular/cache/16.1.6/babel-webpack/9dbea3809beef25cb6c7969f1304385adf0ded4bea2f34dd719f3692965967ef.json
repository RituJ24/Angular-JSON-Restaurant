{"ast":null,"code":"export {};","map":{"version":3,"names":[],"sources":["E:\\Tanisha\\Projects\\Summer term\\Restaurant\\RestaurantApp\\src\\app\\menu-card\\menu-card.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder } from '@angular/forms';\r\nimport { InventoryData } from './menu-card.model';\r\nimport { MenuListService } from '../MenuService/menu-list.service';\r\nimport {Router}\r\n\r\n@Component({\r\n  selector: 'app-menu-card',\r\n  templateUrl: './menu-card.component.html',\r\n  styleUrls: ['./menu-card.component.css']\r\n})\r\nexport class MenuCardComponent implements OnInit{\r\n  inventoryForm!: FormGroup\r\n  inventoryModelObj: InventoryData = new InventoryData;\r\n  allInventoryData: any;\r\n  totalAmount = 0;\r\n  totalQuantity = 0;\r\n  showAdd!: boolean;\r\n  showbtn!: boolean;\r\n  items:InventoryData[] = [];\r\n\r\n  constructor(private FormBuilder: FormBuilder, private api: MenuListService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.inventoryForm = this.FormBuilder.group({\r\n      itemName: [''],\r\n      image: [''],\r\n      amount: ['']\r\n    })\r\n    this.getAllData();\r\n  }\r\n\r\n  clickAddResto(){\r\n    this.inventoryForm.reset();\r\n    this.showAdd= true;\r\n    this.showbtn= false;\r\n  }\r\n\r\n  // addResto() {\r\n  //   this.inventoryModelObj.itemName = this.inventoryForm.value.itemName;\r\n  //   this.inventoryModelObj.amount = this.inventoryForm.value.amount;\r\n  \r\n  //   const imageFile = this.inventoryForm.value.image; // Get the image file from the form\r\n  \r\n  //   this.api.postRestaurant(this.inventoryModelObj, imageFile).subscribe(\r\n  //     (res) => {\r\n  //       console.log(res);\r\n  //       alert(\"Record Added Successfully :)\");\r\n  //       this.inventoryForm.reset();\r\n  //       this.getAllData();\r\n  //     },\r\n  //     (err) => {\r\n  //       alert(\"Something went wrong :(\");\r\n  //     }\r\n  //   );\r\n  // }\r\n  \r\n\r\n  //now subscribing our data which is map via services\r\n  addResto() {\r\n    this.inventoryModelObj.itemName = this.inventoryForm.value.itemName;\r\n    this.inventoryModelObj.image = this.inventoryForm.value.image;\r\n    this.inventoryModelObj.amount = this.inventoryForm.value.amount;\r\n\r\n    this.api.postRestaurant(this.inventoryModelObj).subscribe(res => {\r\n      console.log(res);\r\n      alert(\"Records Added Successfully :)\");\r\n      //clear fill form data\r\n      let ref = document.getElementById('clear');\r\n      ref?.click();\r\n\r\n      this.inventoryForm.reset();\r\n      this.getAllData();\r\n    },\r\n      err => {\r\n        alert(\"Something went wrong :(\");\r\n      }\r\n\r\n    )\r\n  }\r\n\r\n  \r\n\r\n  //Get all data\r\n  getAllData() {\r\n    this.api.getRestaurant().subscribe(res => {\r\n      this.allInventoryData = res;\r\n      this.totalAmount = this.totalPrice();\r\n      this.totalQuantity = this.getTotalQuantity();\r\n     \r\n    })\r\n  }\r\n\r\n  totalPrice(){\r\n    return this.allInventoryData.map((t: { amount: any; }) => t.amount).reduce((acc: any, value: any) => acc + value, 0);\r\n  }\r\n\r\n  getTotalQuantity(){\r\n    return this.allInventoryData.map((t: { quantity: any; }) => t.quantity).reduce((acc: any, value: any ) => acc + value, 0);\r\n  }\r\n\r\n  //delete records\r\n  deleteResto(data:any){\r\n    this.api.deleteRestaurant(data.id).subscribe(res => {\r\n      alert(\"Record Deleted Successfully\");\r\n      this.getAllData();\r\n    })\r\n  }\r\n\r\n  //edit records\r\n  onEditResto(data:any){\r\n    this.showAdd= false;\r\n    this.showbtn= true;\r\n    this.inventoryModelObj.id = data.id;\r\n    this.inventoryForm.controls['itemName'].setValue(data.itemName);\r\n    this.inventoryForm.controls['image'].setValue(data.image);\r\n    this.inventoryForm.controls['amount'].setValue(data.amount);\r\n  }\r\n\r\n  //update records\r\n  updateResto(){\r\n    this.inventoryModelObj.itemName = this.inventoryForm.value.itemName;\r\n    this.inventoryModelObj.image = this.inventoryForm.value.image;\r\n    this.inventoryModelObj.amount = this.inventoryForm.value.amount;\r\n\r\n    this.api.updateRestaurant(this.inventoryModelObj, this.inventoryModelObj.id).subscribe(res=>{\r\n      alert(\"Records Updated Successfully :)\");\r\n      let ref = document.getElementById('clear');\r\n      ref?.click();\r\n\r\n      this.inventoryForm.reset();\r\n      this.getAllData();\r\n    })\r\n  }\r\n}\r\n"],"mappings":""},"metadata":{},"sourceType":"module","externalDependencies":[]}